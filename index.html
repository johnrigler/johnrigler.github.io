<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>fileProxy Live Demo</title>
<style>
  body { font-family: monospace; padding: 20px; }
  .code { background: #f4f4f4; padding: 10px; margin: 10px 0; white-space: pre; }
  .output { margin: 5px 0 15px 0; padding: 10px; border-left: 4px solid #333; }
  .success { color: green; }
  .fail { color: red; }
  button { margin: 5px 0; }
  hr { margin: 30px 0; }
</style>
</head>
<body>

<h1>fileProxy.js Live Demo</h1>
<div id="demo"></div>

<script src="../lib/fileProxy.js?adfd"></script>
<script>
const demo = document.getElementById('demo');

function addExample(title, code, runFn) {
  const h3 = document.createElement('h3');
  h3.textContent = title;
  demo.appendChild(h3);

  const pre = document.createElement('pre');
  pre.className = 'code';
  pre.textContent = code;
  demo.appendChild(pre);

  const btn = document.createElement('button');
  btn.textContent = 'Run Example';
  demo.appendChild(btn);

  const out = document.createElement('div');
  out.className = 'output';
  demo.appendChild(out);

  btn.onclick = async () => {
    out.textContent = 'Running...';
    try {
      const result = await runFn();
      out.textContent = 'Result: ' + JSON.stringify(result, null, 2);
      out.className = 'output success';
    } catch (e) {
      out.textContent = 'Error: ' + e.message;
      out.className = 'output fail';
    }
  }

  demo.appendChild(document.createElement('hr'));
}

// Example: Check server
addExample(
  'Check Server Running',
`await fetch('http://localhost:7799/list', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({ dirname: '' })
});`,
async () => {
  const res = await fetch('http://localhost:7799/list', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ dirname: '' })
  });
  if (!res.ok) throw new Error('Server not reachable: ' + res.status);
  return 'Server is running';
});

// Example: Create directory
addExample(
  'Create Directory',
`await fileProxy.mkDir('demoDir');`,
async () => {
  await fileProxy.mkDir('demoDir');
  return 'Directory "demoDir" created';
});

// Example: Write JSON file
addExample(
  'Write JSON File',
`await fileProxy.fileWrite({foo:'bar'}, 'demoDir/test.json');`,
async () => {
  await fileProxy.fileWrite({foo:'bar'}, 'demoDir/test.json');
  return 'File "demoDir/test.json" written';
});

// Example: List directory
addExample(
  'List Directory',
`await fileProxy.fileList('demoDir');`,
async () => {
  const list = await fileProxy.fileList('demoDir');
  return list.list;
});

// Example: Read JSON file
addExample(
  'Read JSON File',
`const res = await fileProxy.fileRead('demoDir/test.json');\nconst data = await res.json();`,
async () => {
  const res = await fileProxy.fileRead('demoDir/test.json');
  const data = await res.json();
  return data;
});

// Example: Delete file
addExample(
  'Delete File',
`await fileProxy.fileDelete('demoDir/test.json');`,
async () => {
  await fileProxy.fileDelete('demoDir/test.json');
  return 'File deleted';
});

// Example: Remove directory
addExample(
  'Remove Directory',
`await fileProxy.rmDir('demoDir');`,
async () => {
  await fileProxy.rmDir('demoDir');
  return 'Directory removed';
});
</script>

</body>
</html>

